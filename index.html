<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>hey pretty mama</title>

<!-- Google font -->
<link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">

<style>
/* -------- basics -------- */
html,body{
  margin:0;padding:0;color:#fff;font-family:'Luckiest Guy',cursive;text-align:center;overflow-x:hidden;
  background:linear-gradient(to bottom,#ffd1dc,#ffe6b3,#cceeff);
  transition:background 2s ease;font-size:1.1rem}
body.night{background:linear-gradient(to bottom,#1e3c72,#2a5298,#0f2027)}

/* -------- top widgets -------- */
.info-container{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;margin:10px}
.info-box{background:rgba(0,0,0,.3);padding:5px 10px;border-radius:8px;font-size:1rem;transition:background .8s}

/* -------- toggle button -------- */
.toggle-btn{margin-top:10px;padding:8px 16px;border-radius:10px;border:none;background:#fff;color:#333;
            cursor:pointer;font-family:'Luckiest Guy',cursive}

/* -------- sun & moon -------- */
#moon,#sun{margin:10px auto 0;display:inline-block;width:80px;height:80px;border-radius:50%;opacity:.8;
           box-shadow:0 0 30px 10px rgba(255,255,255,.5)}
#moon{background:radial-gradient(circle,#fff 40%,#ccc 70%,transparent 100%)}
#sun {background:radial-gradient(circle,#ffecb3 40%,#ffd54f 70%,transparent 100%)}

/* -------- headline -------- */
h1{font-size:2.5rem;margin:20px 0 10px}

/* -------- countdown -------- */
#countdown{display:flex;justify-content:center;gap:20px;flex-wrap:wrap;margin-top:10px}
.time-block{width:100px;padding:18px;border-radius:20px;background:rgba(255,228,181,.8);color:#333;
            font-size:2rem;box-shadow:0 4px 10px rgba(0,0,0,.1)}
.label{font-size:1rem;margin-top:4px}

/* -------- clouds -------- */
@keyframes cloudFloat{0%{transform:translateX(-250px)}100%{transform:translateX(150vw)}}
.cloud{position:absolute;background:#fff;border-radius:50%;opacity:.8;animation:cloudFloat 60s linear infinite;
       box-shadow:-60px 20px #fff,-30px 10px #fff,0 0 #fff,30px 10px #fff,60px 20px #fff}
.cloud1{width:200px;height:60px;top:50px;animation-delay:0s}
.cloud2{width:180px;height:70px;top:100px;animation-delay:10s}
.cloud3{width:220px;height:80px;top:180px;animation-delay:20s}

/* -------- UFO -------- */
@keyframes ufoSlide{0%{left:-80px}100%{left:calc(100vw + 80px)}}
#ufo{position:absolute;top:140px;font-size:2.2rem;animation:ufoSlide 22s linear infinite;pointer-events:none}

/* -------- floating heads -------- */
.head{position:absolute;right:-100px;top:50%;display:none;pointer-events:none;z-index:3}

/* -------- media players -------- */
audio,video{display:block;margin:20px auto;border-radius:8px}
.whale-buttons{display:flex;justify-content:center;gap:20px;margin-bottom:20px;flex-wrap:wrap}
.whale-button{background:none;border:none;font-size:2rem;cursor:pointer}

/* -------- tiny text -------- */
.tiny{margin-top:18px;font-size:.85rem}

/* -------- game canvas -------- */
canvas.game-canvas{border:2px solid #ccc;background:#e6f7ff;display:block;margin:50px auto;border-radius:16px}

/* -------- mobile tweaks -------- */
@media(max-width:600px){
  .info-container{flex-direction:column}
  h1{font-size:2rem;margin-top:15px}
}
</style>
</head>
<body class="day">

<!-- Stars + Clouds + UFO + Heads -->
<canvas id="stars-canvas" style="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0"></canvas>
<div class="cloud cloud1"></div><div class="cloud cloud2"></div><div class="cloud cloud3"></div>
<div id="ufo">üõ∏</div>

<!-- floating heads -->
<div id="head1" class="head">
  <img src="https://dl.dropboxusercontent.com/scl/fi/5o04858h6fdqt23amgfwl/IMG_2568-removebg-preview.png?raw=1"
       width="60" height="60" style="object-fit:contain">
</div>
<div id="head2" class="head">
  <img src="https://dl.dropboxusercontent.com/scl/fi/padr9l1hdyatevnojn5kd/IMG_3133-removebg-preview.png?raw=1"
       width="60" height="60" style="object-fit:contain">
</div>

<!-- clock / air / temp -->
<div class="info-container">
  <div class="info-box" id="single-clock">Loading time‚Ä¶</div>
  <div class="info-box" id="airMood"   title="Loading AQI‚Ä¶">Loading air mood‚Ä¶</div>
  <div class="info-box" id="temp">Loading temperature‚Ä¶</div>
</div>

<!-- sun / moon -->
<div id="moon"></div><div id="sun"></div>

<h1 title="hi tori üëÄ">You, Me, and This Countdown ‚Äî A Love Triangle</h1>
<button class="toggle-btn" onclick="toggleMode()">Toggle Day / Night</button>

<!-- countdown -->
<div id="countdown">
  <div class="time-block"><div id="days">0</div><div class="label">Days</div></div>
  <div class="time-block"><div id="hours">0</div><div class="label">Hours</div></div>
  <div class="time-block"><div id="minutes">0</div><div class="label">Minutes</div></div>
  <div class="time-block"><div id="seconds">0</div><div class="label">Seconds</div></div>
</div>

<!-- looping gif -->
<video class="gif" autoplay loop muted playsinline>
  <source src="244188_small.mp4" type="video/mp4">
</video>

<!-- music playlist (handled in JS) -->
<audio id="bg-music" preload="auto"></audio>
<div class="whale-buttons">
  <button class="whale-button" onclick="pauseMusic()">üêã</button>
  <button class="whale-button" onclick="playMusic()">üê≥</button>
</div>

<!-- secret-code reveal -->
<div>
  <label for="secret-code">Enter the name of the place we went on our first date:</label><br>
  <input id="secret-code" placeholder="hint: jk, no hints" oninput="checkCode()">
  <img id="hidden-photo" src="IMG_2797.jpeg" style="display:none;max-width:80%;margin-top:20px;border-radius:12px">
</div>

<!-- voice note -->
<audio id="voice-note" controls style="margin-top:20px"></audio>

<!-- game -->
<canvas id="gameCanvas" class="game-canvas" width="400" height="500"></canvas>
<div class="arrow-buttons">
  <button onclick="moveLeft()">‚¨ÖÔ∏è</button>
  <button onclick="moveRight()">‚û°Ô∏è</button>
</div>
<div style="font-size:1.5rem;margin-top:20px">Score: <span id="scoreDisplay">0</span></div>
<div style="font-size:1rem;color:#ddd">Top score: whatever you just got</div>

<!-- whale fact + sound -->
<div id="daily-fact" style="margin-top:30px">üêã Whale Fact: Loading‚Ä¶</div>
<audio id="whale-sound" preload="auto"></audio>
<div class="tiny" style="cursor:pointer" onclick="playWhaleSound()">üîä Hear what the whale has to say about Israel</div>

<!-- JavaScript ------------------------------------------------------------- -->
<script>
const $ = id => document.getElementById(id);

/* ---------- playlist ---------- */
const tracks=[
  {name:"Next to You",url:"https://dl.dropboxusercontent.com/scl/fi/taqihndudrnlq5ruo1shn/Next-to-You.mp3?raw=1"},
  {name:"Do You Remember",url:"https://dl.dropboxusercontent.com/scl/fi/b1bja2neem0zfpe82yimv/Do-You-Remember.mp3?raw=1"},
  {name:"Delicate (Tracking Room)",url:"https://dl.dropboxusercontent.com/scl/fi/0a56znw8yg2vjlwzr3rht/Taylor-Swift-Delicate-Recorded-at-The-Tracking-Room-Nashville.mp3?raw=1"},
  {name:"All That and More",url:"https://dl.dropboxusercontent.com/scl/fi/0vxk899m5yh19esc1u7fo/All-That-And-More-Sailboat.mp3?raw=1"}
];
let idx=0; const player=$("bg-music");
function loadTrack(i){idx=i;player.src=tracks[idx].url;player.play()}
player.addEventListener("ended",()=>loadTrack((idx+1)%tracks.length));
loadTrack(0);
function pauseMusic(){player.pause()} function playMusic(){player.play()}

/* voice + whale */
$("voice-note").src ="https://dl.dropboxusercontent.com/scl/fi/47oiteyruexurqtdprj3n/New-Recording-14.mp3?raw=1";
$("whale-sound").src="https://dl.dropboxusercontent.com/scl/fi/gqm7x0nqkv73l89wgil01/Singing-whales.mp3?raw=1";
function playWhaleSound(){const a=$("whale-sound");a.currentTime=0;a.play()}

/* ---------- toggle day/night ---------- */
function toggleMode(){
  document.body.classList.toggle("night");
  $("moon").style.display=document.body.classList.contains("night")?"block":"none";
  $("sun").style.display =document.body.classList.contains("night")?"none":"block";
  updateSingleClock();updateTemperature();updateAirMood();
}

/* ---------- secret image ---------- */
function checkCode(){ $("hidden-photo").style.display=($("secret-code").value.trim().toLowerCase()==="scopa")?"block":"none"; }

/* ---------- countdown ---------- */
const target=new Date("August 28, 2025 17:00:00 GMT-0700").getTime();
setInterval(()=>{
  const d=target-Date.now();
  $("days").textContent=Math.floor(d/864e5);
  $("hours").textContent=Math.floor(d%864e5/36e5);
  $("minutes").textContent=Math.floor(d%36e5/6e4);
  $("seconds").textContent=Math.floor(d%6e4/1e3);
},1000);

/* ---------- whale fact ---------- */
const facts=[
  "A blue-whale heartbeat can be heard two miles away with hydrophones.","Bowhead whales still carry 1800-s harpoon tips in their blubber.",
  "Belugas can bend their necks‚Äîmost whales can‚Äôt.","Sperm-whale clicks reach 230 dB, enough to stun prey.","Gray-whale moms whisper to calves so orcas can‚Äôt eavesdrop.",
  "Narwhal tusks are giant sensory organs.","Some humpbacks have ‚Äúnames‚Äù other humpbacks shout back.","Minke whales burst over 20 mph.","Fin-whale pairs sync their spouts mid-air.","Pilot-whale pods adopt orphaned dolphins.",
  "Antarctic blue whales add ~200 lb an hour in feeding season.","Right-whale calluses are unique like fingerprints.","Beaked whales dive nearly 3 km by shutting organs down.",
  "Humpback males form ‚Äúpickup lines‚Äù behind a female.","Orca clans keep dialects for centuries.",
  "Whale earwax grows in rings like tree rings.","Blue-whale poop is hot-pink from krill pigment.","Sei whales skim so close birds rest on their backs.",
  "Gray-whale lunges vacuum prey from the seabed.","Pakicetus, a whale with legs, was found in a Pakistani desert."
];
$("daily-fact").textContent="üêã Whale Fact: "+facts[new Date().getDate()%facts.length];

/* ---------- simple heart game ---------- */
let score=0,wx=160,wy=450,hearts=[];const gc=$("gameCanvas"),g=gc.getContext("2d");
function drawWhale(){g.fillStyle="#0077cc";g.fillRect(wx,wy,80,30)}
function drawHeart(x,y){g.fillStyle="red";g.beginPath();
  g.moveTo(x,y);g.bezierCurveTo(x,y-10,x-10,y-15,x-15,y);
  g.bezierCurveTo(x-20,y+15,x,y+25,x,y+35);g.bezierCurveTo(x,y+25,x+20,y+15,x+15,y);
  g.bezierCurveTo(x+10,y-15,x,y-10,x,y);g.fill();}
function gameLoop(){
  g.clearRect(0,0,gc.width,gc.height);drawWhale();
  for(let i=0;i<hearts.length;i++){
    hearts[i].y+=2;drawHeart(hearts[i].x,hearts[i].y);
    if(hearts[i].y>wy && hearts[i].x>wx && hearts[i].x<wx+80){hearts.splice(i,1);score++;$("scoreDisplay").textContent=score;i--}
  }
  if(Math.random()<.03)hearts.push({x:Math.random()*380+10,y:-20});
  requestAnimationFrame(gameLoop)}gameLoop();
function moveLeft(){wx=Math.max(0,wx-20)}function moveRight(){wx=Math.min(320,wx+20)}
document.addEventListener("keydown",e=>{if(e.key==="ArrowLeft")moveLeft();if(e.key==="ArrowRight")moveRight()});

/* ---------- stars ---------- */
const starCan=$("stars-canvas"),sctx=starCan.getContext("2d");let stars=[],shoot=null;
function sizeStar(){starCan.width=innerWidth;starCan.height=innerHeight}onresize=sizeStar;sizeStar();
for(let i=0;i<150;i++)stars.push({x:Math.random()*starCan.width,y:Math.random()*starCan.height,r:Math.random()*1.5,a:Math.random(),d:Math.random()*.02});
function spawnShoot(){shoot={x:Math.random()*starCan.width,y:0,r:2,s:10}}
setInterval(()=>{if(document.body.classList.contains("night")&&!shoot&&Math.random()<.1)spawnShoot()},1000);
function starLoop(){
  sctx.clearRect(0,0,starCan.width,starCan.height);
  if(document.body.classList.contains("night")){
    stars.forEach(s=>{s.a+=s.d;if(s.a<=0||s.a>=1)s.d=-s.d;
      sctx.fillStyle=`rgba(255,255,255,${s.a})`;sctx.beginPath();sctx.arc(s.x,s.y,s.r,0,2*Math.PI);sctx.fill()});
    if(shoot){sctx.fillStyle="#fff";sctx.beginPath();sctx.arc(shoot.x,shoot.y,shoot.r,0,2*Math.PI);sctx.fill();
      shoot.x+=shoot.s;shoot.y+=shoot.s;if(shoot.y>starCan.height)shoot=null;}
  }requestAnimationFrame(starLoop)}starLoop();

/* ---------- floating heads ---------- */
function spawnHead(el){
  if(!document.body.classList.contains("night"))return;
  el.style.display="block";let x=innerWidth+80,y=innerHeight/2+(Math.random()*60-30);
  const id=setInterval(()=>{x-=2.6;y-=.2;el.style.left=x+"px";el.style.top=y+"px";
    if(x<-100){clearInterval(id);el.style.display="none"}},30)}
setInterval(()=>spawnHead($("head1")),3000);  // 3-s test (change to 120000 later)
setInterval(()=>spawnHead($("head2")),5000);  // 5-s test (change to 160000 later)

/* ---------- clock ---------- */
function updateSingleClock(){
  const night=document.body.classList.contains("night");
  const tz=night?"America/New_York":"America/Los_Angeles";
  const lbl=night?"Your Time":"Tyler's Time";
  $("single-clock").textContent=`${lbl}: `+new Date().toLocaleTimeString("en-US",{timeZone:tz,hour:"2-digit",minute:"2-digit"})}
setInterval(updateSingleClock,1000);updateSingleClock();

/* ---------- weather + AQI ---------- */
const wxKey="113bf4b240cd4c9a81e42115252906";
async function updateTemperature(){
  const night=document.body.classList.contains("night");
  const coords=night?"40.7033,-74.0110":"34.0122,-118.4279";
  const lbl=night?"Your temperature":"Tyler's temperature";
  try{
    const d=await fetch(`https://api.weatherapi.com/v1/current.json?key=${wxKey}&q=${coords}`).then(r=>r.json());
    $("temp").textContent=`${lbl}: ${d.current.temp_f}¬∞F`;
  }catch{$("temp").textContent="Temperature unavailable."}}
updateTemperature();setInterval(updateTemperature,900000);

const moods=[
  "‚ú® Air‚Äôs basically filtered, reverse osmosis vibes.","ü´ß Kinda clean, ngl.","üòó‚úåÔ∏è Meh. Kinda mid.",
  "ü´† Low-key crusty out here.","üòÆ‚Äçüí® The air is literally buns af.","‚ò†Ô∏è Babe don‚Äôt breathe this."];
async function updateAirMood(){
  const night=document.body.classList.contains("night");
  const coords=night?"40.7033,-74.0110":"34.0122,-118.4279";
  try{
    const d=await fetch(`https://api.weatherapi.com/v1/current.json?key=${wxKey}&q=${coords}&aqi=yes`).then(r=>r.json());
    const idx=d.current.air_quality["us-epa-index"];const mood=moods[idx-1]||"ü§∑‚Äç‚ôÇÔ∏è air-status unknown";
    $("airMood").textContent=`Air Mood: ${mood}`;$("airMood").title=`AQI index: ${idx}`;
    $("airMood").style.background=idx>=4?"rgba(255,0,0,.45)":"rgba(0,0,0,.3)";
  }catch{$("airMood").textContent="Air Mood: unavailable."}}
updateAirMood();setInterval(updateAirMood,900000);
</script>
</body>
</html>
