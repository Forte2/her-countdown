<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<title>hey pretty mama</title>
<link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet"/>
<style>
html, body {
  margin: 0;
  padding: 0;
  font-family: 'Luckiest Guy', cursive;
  text-align: center;
  overflow-x: hidden;
  color: white;
  background: linear-gradient(to bottom, #ffd1dc, #ffe6b3, #cceeff);
  font-size: 1.1rem;
  transition: background 2s ease;
}
body.night {
  background: linear-gradient(to bottom, #1e3c72, #2a5298, #0f2027);
}
.toggle-btn {
  margin-top: 10px;
  padding: 8px 16px;
  border-radius: 10px;
  border: none;
  background: #fff;
  color: #333;
  cursor: pointer;
  font-family: 'Luckiest Guy', cursive;
}
.info-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 10px;
  margin: 10px;
}
.info-box {
  background: rgba(0,0,0,0.3);
  padding: 5px 10px;
  border-radius: 8px;
  font-size: 1rem;
  transition: background 1s ease;
}
#moon, #sun {
  position: relative;
  display: inline-block;
  margin: 20px auto;
  width: 80px;
  height: 80px;
  border-radius: 50%;
  box-shadow: 0 0 30px 10px rgba(255,255,255,0.5);
  opacity: 0.7;
}
#moon {
  background: radial-gradient(circle, #fff 40%, #ccc 70%, transparent 100%);
}
#sun {
  background: radial-gradient(circle, #ffecb3 40%, #ffd54f 70%, transparent 100%);
}
@keyframes floatClouds {
  0% { transform: translateX(0); }
  100% { transform: translateX(150vw); }
}
.cloud {
  position: absolute;
  background: #fff;
  border-radius: 50%;
  box-shadow: -60px 20px #fff, -30px 10px #fff, 0 0 #fff, 30px 10px #fff, 60px 20px #fff;
  opacity: 0.8;
  animation: floatClouds 60s linear infinite;
  transform: translateX(-200px);
}
.cloud1 { width: 200px; height: 60px; top: 50px; left: -250px; animation-delay: 0s; }
.cloud2 { width: 180px; height: 70px; top: 100px; left: -300px; animation-delay: 10s; }
.cloud3 { width: 220px; height: 80px; top: 180px; left: -350px; animation-delay: 20s; }
/* üõ∏ UFO fly-by */
#ufo{
  position:absolute;
  top:120px;
  left:-60px;
  font-size:2.5rem;
  z-index:3;
  display:block;
  animation:floatClouds 45s linear infinite;
  pointer-events:none;
}
/* floating heads */
.head{
  position:absolute;
  top:50%;
  left:calc(100vw + 120px);
  z-index:3;
  display:none;
  pointer-events:none;
}
h1 {
  font-size: 2.5rem;
  margin-top: 20px;
}
#countdown {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 1rem;
  flex-wrap: wrap;
}
.time-block {
  background-color: rgba(255,228,181,0.8);
  padding: 20px;
  border-radius: 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  font-size: 2rem;
  width: 100px;
  color: #333;
}
.label { font-size: 1rem; margin-top: 5px; }
.gif {
  margin-top: 30px;
  border-radius: 12px;
  max-width: 100%;
}
audio {
  display: block;
  margin: 20px auto;
  border-radius: 8px;
}
.whale-buttons {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-bottom: 20px;
  flex-wrap: wrap;
}
.whale-button {
  font-size: 2rem;
  background: none;
  border: none;
  cursor: pointer;
}
.tiny {
  margin-top: 20px;
  font-size: 0.8rem;
  color: #fff;
}
canvas.game-canvas {
  border: 2px solid #ccc;
  background: #e6f7ff;
  display: block;
  margin: 50px auto;
  border-radius: 16px;
}
input, button {
  font-family: 'Luckiest Guy', cursive;
  padding: 5px 10px;
  border-radius: 8px;
  border: none;
  margin-top: 10px;
}
.arrow-buttons {
  margin-top: 10px;
}
.arrow-buttons button {
  font-size: 2rem;
  margin: 0 20px;
  background: #fff;
  color: #333;
  border-radius: 10px;
  cursor: pointer;
  touch-action: manipulation;
}
#daily-fact {
  margin: 30px auto;
  font-size: 1.2rem;
  max-width: 90%;
}
@media (max-width: 600px) {
  .info-container {
    flex-direction: column;
    align-items: center;
  }
  h1 {
    font-size: 2rem;
    margin-top: 20px;
  }
}
</style>
</head>
<body class="day">

<!-- All your body content is unchanged up to here -->

<!-- ‚îÄ‚îÄ‚îÄ PLAYLIST ‚îÄ‚îÄ‚îÄ -->
<audio id="audio-player" controls preload="metadata">
  Your browser doesn‚Äôt support HTML5 audio.
</audio>
<script>
const playlist = [
  "https://dl.dropboxusercontent.com/scl/fi/taqihndudrnlq5ruo1shn/Next-to-You.mp3?raw=1",
  "https://dl.dropboxusercontent.com/scl/fi/b1bja2neem0zfpe82yimv/Do-You-Remember.mp3?raw=1",
  "https://dl.dropboxusercontent.com/scl/fi/0a56znw8yg2vjlwzr3rht/Taylor-Swift-Delicate-Recorded-at-The-Tracking-Room-Nashville.mp3?raw=1",
  "https://dl.dropboxusercontent.com/scl/fi/0vxk899m5yh19esc1u7fo/All-That-And-More-Sailboat.mp3?raw=1"
];

const audioPlayer = document.getElementById("audio-player");
let currentTrack = 0;

function loadTrack(i) {
  audioPlayer.src = playlist[i];
  audioPlayer.load();
  audioPlayer.play().catch(() => {
    // Autoplay was prevented‚Äîwait for user interaction
  });
}

audioPlayer.addEventListener("ended", () => {
  currentTrack = (currentTrack + 1) % playlist.length;
  loadTrack(currentTrack);
});

loadTrack(0);
</script>

<div class="whale-buttons">
  <button onclick="pauseMusic()" class="whale-button">üêã</button>
  <button onclick="playMusic()" class="whale-button">üê≥</button>
</div>

<div>
  <label for="secret-code">Enter the name of the place we went on our first date:</label><br>
  <input type="text" id="secret-code" placeholder="hint: jk, no hints" oninput="checkCode()" />
  <img id="hidden-photo" src="IMG_2797.jpeg" alt="Hidden Memory" style="display:none; max-width: 80%; margin-top: 20px; border-radius: 12px;">
</div>

<!-- Voice note above game -->
<div style="margin-top: 20px;">
  <audio controls>
    <source src="https://dl.dropboxusercontent.com/scl/fi/47oiteyruexurqtdprj3n/New-Recording-14.mp3?rlkey=ki0tbhksz8o9qb0qoqqejtwgd&raw=1" type="audio/mpeg">
  </audio>
</div>

<canvas id="gameCanvas" class="game-canvas" width="400" height="500"></canvas>
<div class="arrow-buttons">
  <button onclick="moveLeft()">‚¨ÖÔ∏è</button>
  <button onclick="moveRight()">‚û°Ô∏è</button>
</div>
<div style="font-size: 1.5rem; margin-top:20px;">Score: <span id="scoreDisplay">0</span></div>
<div style="font-size: 1rem; color: #ddd;">Top score: whatever you just got</div>

<div id="daily-fact">üêã Whale Fact: Loading...</div>

<!-- Whale noise below fact -->
<audio id="whale-sound">
  <source src="https://dl.dropboxusercontent.com/scl/fi/gqm7x0nqkv73l89wgil01/Singing-whales.mp3?rlkey=57v52ln03b09714f1cmzq813i&raw=1" type="audio/mpeg">
</audio>
<div class="tiny" style="cursor:pointer;" onclick="playWhaleSound()">üîä Hear what the whale has to say about Israel</div>

<script>
// Countdown
const countDownDate = new Date("August 28, 2025 17:00:00 GMT-0700").getTime();
setInterval(() => {
  const now = new Date().getTime();
  const distance = countDownDate - now;
  document.getElementById("days").innerText = Math.floor(distance / (1000 * 60 * 60 * 24));
  document.getElementById("hours").innerText = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  document.getElementById("minutes").innerText = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  document.getElementById("seconds").innerText = Math.floor((distance % (1000 * 60)) / 1000);
}, 1000);

// Music controls
function pauseMusic() { document.getElementById('audio-player').pause(); }
function playMusic()  { document.getElementById('audio-player').play(); }

// Play Whale Sound
function playWhaleSound() {
  const whaleAudio = document.getElementById('whale-sound');
  whaleAudio.currentTime = 0;
  whaleAudio.play();
}

// Toggle Day/Night
function toggleMode() {
  document.body.classList.toggle("night");
  document.getElementById("moon").style.display = document.body.classList.contains("night") ? "block" : "none";
  document.getElementById("sun").style.display = document.body.classList.contains("night") ? "none" : "block";
  updateSingleClock();
  updateTemperature();
  updateAirMood();
}

// Secret Code
function checkCode() {
  const input = document.getElementById('secret-code').value.trim().toLowerCase();
  const photo = document.getElementById('hidden-photo');
  photo.style.display = (input === 'scopa') ? 'block' : 'none';
}

// Whale Facts
const facts = [
  "Gargantuan hearts: A blue whale‚Äôs heart is about the size of a small car and can weigh over 1,000 lbs.",
  "Vertical sleepers: Sperm whales often sleep ‚Äústanding‚Äù vertically in the water, drifting head-up.",
  "Vocal mimics: Beluga whales can mimic a range of sounds‚Äîincluding human speech cadences.",
  "Stealthy whispers: Mother gray whales use soft, low-frequency calls so orca predators can‚Äôt eavesdrop.",
  "Sensory tusks: Narwhal tusks aren‚Äôt horns but sensory organs packed with nerve endings to detect water chemistry.",
  "Ancient longevity: Bowhead whales can live over 200 years, making them the longest-lived mammals.",
  "Dolphin cousins: Orcas (killer whales) are actually the largest members of the dolphin family.",
  "Elephant tongue: A blue whale‚Äôs tongue can weigh as much as an adult elephant‚Äî3‚Äì4 tons.",
  "Speed demons: Minke whales can burst-swim at over 20 mph when startled.",
  "Deep divers: Cuvier‚Äôs beaked whales hold the mammalian dive record‚Äînearly 10,000 ft deep for up to two hours.",
  "Rapid refueling: Antarctic blue whales can pack on 150‚Äì200 lbs of blubber per hour during peak krill feeding.",
  "Fingerprint calluses: Right whales have unique callosity patterns on their heads‚Äîused like whale ‚Äúfingerprints.‚Äù",
  "Courtship queues: Humpback males form ‚Äúsinging chains‚Äù in which they take turns serenading a female.",
  "Earwax time-capsules: Whale earplugs accumulate wax in annual layers, letting scientists age them like tree rings.",
  "Neon poop: A blue whale‚Äôs fecal plume is bright pink from krill pigments‚Äîa crucial iron fertilizer for oceans.",
  "Seabird pit stops: Sei whales skim-feed so close to the surface that seabirds sometimes land on their backs.",
  "Adoptive pods: Pilot whales have been observed adopting orphaned dolphins‚Äîeven of different species.",
  "Synchronized breaths: Fin whale pairs sometimes time their surface blows so their spouts merge into one.",
  "Named songs: Individual humpbacks develop signature song phrases‚Äîothers repeat them like social names.",
  "Land-walking ancestors: Pakicetus, an early whale ancestor 50 M years ago, had four legs and lived in Pakistan‚Äôs desert."
];

const today = new Date();
document.getElementById("daily-fact").innerText =
  "üêã " + facts[today.getDate() % facts.length];

// Game
let score = 0, whaleX = 160, whaleY = 450, hearts = [];
const canvas = document.getElementById("gameCanvas"), ctx = canvas.getContext("2d");
function drawWhale() { ctx.fillStyle = "#0077cc"; ctx.fillRect(whaleX, whaleY, 80, 30); }
function drawHeart(x, y) {
  ctx.fillStyle = "red";
  ctx.beginPath();
  ctx.moveTo(x, y);
  ctx.bezierCurveTo(x, y - 10, x - 10, y - 15, x - 15, y);
  ctx.bezierCurveTo(x - 20, y + 15, x, y + 25, x, y + 35);
  ctx.bezierCurveTo(x, y + 25, x + 20, y + 15, x + 15, y);
  ctx.bezierCurveTo(x + 10, y - 15, x, y - 10, x, y);
  ctx.fill();
}
function updateGame() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawWhale();
  for (let i = 0; i < hearts.length; i++) {
    hearts[i].y += 2;
    drawHeart(hearts[i].x, hearts[i].y);
    if (hearts[i].y > whaleY && hearts[i].x > whaleX && hearts[i].x < whaleX + 80) {
      hearts.splice(i, 1);
      score++;
      document.getElementById('scoreDisplay').innerText = score;
      i--;
    }
  }
  if (Math.random() < 0.03) hearts.push({ x: Math.random() * 380 + 10, y: -20 });
  requestAnimationFrame(updateGame);
}
function moveLeft() { whaleX = Math.max(0, whaleX - 20); }
function moveRight() { whaleX = Math.min(320, whaleX + 20); }
document.addEventListener("keydown", e => {
  if (e.key === "ArrowLeft") moveLeft();
  if (e.key === "ArrowRight") moveRight();
});
updateGame();

// Stars
const starsCanvas = document.getElementById('stars-canvas'), starsCtx = starsCanvas.getContext('2d');
let stars = [], shootingStar = null;
function resizeStars() {
  starsCanvas.width = window.innerWidth;
  starsCanvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeStars);
resizeStars();
for (let i = 0; i < 150; i++) {
  stars.push({
    x: Math.random() * starsCanvas.width,
    y: Math.random() * starsCanvas.height,
    radius: Math.random() * 1.5,
    alpha: Math.random(),
    delta: Math.random() * 0.02
  });
}
function spawnShootingStar() {
  shootingStar = { x: Math.random() * starsCanvas.width, y: 0, radius: 2, speed: 10, active: true };
}
setInterval(() => {
  if (document.body.classList.contains('night') && Math.random() < 0.1 && !shootingStar) spawnShootingStar();
}, 1000);
function animateStars() {
  starsCtx.clearRect(0, 0, starsCanvas.width, starsCanvas.height);
  if (document.body.classList.contains('night')) {
    stars.forEach(s => {
      s.alpha += s.delta;
      if (s.alpha <= 0 || s.alpha >= 1) s.delta = -s.delta;
      starsCtx.beginPath();
      starsCtx.arc(s.x, s.y, s.radius, 0, Math.PI * 2);
      starsCtx.fillStyle = `rgba(255,255,255,${s.alpha})`;
      starsCtx.fill();
    });
    if (shootingStar && shootingStar.active) {
      starsCtx.beginPath();
      starsCtx.arc(shootingStar.x, shootingStar.y, shootingStar.radius, 0, Math.PI * 2);
      starsCtx.fillStyle = 'white';
      starsCtx.fill();
      shootingStar.x += shootingStar.speed;
      shootingStar.y += shootingStar.speed;
      if (shootingStar.y > starsCanvas.height) shootingStar = null;
    }
  }
  requestAnimationFrame(animateStars);
}
animateStars();

/* ----------  Floating heads  ---------- */
const head1 = document.getElementById('head1');
const head2 = document.getElementById('head2');

function spawnHead(el) {
  // don‚Äôt relaunch if this head is still on screen or it‚Äôs daytime
  if (el.style.display === 'block' || !document.body.classList.contains('night')) return;

  el.style.display = 'block';
  let x = window.innerWidth + 120;                       // start just off-screen right
  let y = window.innerHeight / 2 + (Math.random() * 60 - 30);

  const SPEED = 2.5;  // px per frame
  const FRAME = 30;   // ms per frame

  const mover = setInterval(() => {
    x -= SPEED;
    y -= 0.2;
    el.style.left = x + 'px';
    el.style.top  = y + 'px';

    if (x < -120) {                   // once fully past the left edge
      clearInterval(mover);
      el.style.display = 'none';
    }
  }, FRAME);
}
/* ---------- Floating heads timing ---------- */
const SPEED = 2.5;   // px per frame  (leave as-is)
const FRAME = 30;    // ms per frame  (leave as-is)

/* total travel time for one full drift (just kept for reference) */
const travelTime =
  ((window.innerWidth + 240) / (SPEED / (FRAME / 1000))) * 1000; // ms

/* --- new schedule: head1 every 2 min, head2 every 3 min --- */
setInterval(() => spawnHead(head1), 120_000);  // 120 000 ms = 2 min
setInterval(() => spawnHead(head2), 180_000);  // 180 000 ms = 3 min

// Clock
function updateSingleClock() {
  const isNight = document.body.classList.contains("night");
  const tz = isNight ? "America/New_York" : "America/Los_Angeles";
  const label = isNight ? "Your Time" : "Tyler's Time";
  const time = new Date().toLocaleTimeString('en-US', { timeZone: tz, hour: '2-digit', minute: '2-digit' });
  document.getElementById("single-clock").textContent = `${label}: ${time}`;
}
setInterval(updateSingleClock, 1000);
updateSingleClock();

// Temperature and Air Mood
async function updateTemperature() {
  const apiKey = "113bf4b240cd4c9a81e42115252906";
  const tempDiv = document.getElementById("temp");
  try {
    const isNight = document.body.classList.contains("night");
    const coords = isNight ? "40.7033,-74.0110" : "34.0122,-118.4279";
    const label = isNight ? "Your temperature" : "Tyler's temperature";
    const response = await fetch(`https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${coords}`);
    const data = await response.json();
    tempDiv.textContent = `${label}: ${data.current.temp_f}¬∞F`;
  } catch {
    tempDiv.textContent = "Temperature unavailable.";
  }
}
updateTemperature();
setInterval(updateTemperature, 900000);

const moods = [
  "‚ú® Air‚Äôs basically filtered, reverse osmosis vibes.",
  "ü´ß Kinda clean, ngl.",
  "üòó‚úåÔ∏è Meh. Kinda mid.",
  "ü´† Low-key crusty out here.",
  "üòÆ‚Äçüí® The air is literally buns af.",
  "‚ò†Ô∏è Babe don‚Äôt breathe this."
];
async function updateAirMood() {
  const apiKey = "113bf4b240cd4c9a81e42115252906";
  const airDiv = document.getElementById("airMood");
  try {
    const isNight = document.body.classList.contains("night");
    const coords = isNight ? "40.7033,-74.0110" : "34.0122,-118.4279";
    const response = await fetch(`https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${coords}&aqi=yes`);
    const data = await response.json();
    const index = data.current.air_quality["us-epa-index"];
    const mood = moods[index - 1] || "ü§∑‚Äç‚ôÇÔ∏è Air status unknown.";
    airDiv.textContent = `Air Mood: ${mood}`;
    airDiv.title = `AQI index: ${index}`;
    airDiv.style.background = index >= 4 ? "rgba(255,0,0,0.4)" : "rgba(0,0,0,0.3)";
  } catch {
    airDiv.textContent = "Air Mood: unavailable.";
  }
}
updateAirMood();
setInterval(updateAirMood, 900000);
</script>
</body>
</html>
