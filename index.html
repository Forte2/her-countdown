<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<title>Countdown to You</title>
<link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet"/>
<style>
html, body {
  margin: 0;
  padding: 0;
  font-family: 'Luckiest Guy', cursive;
  text-align: center;
  overflow-x: hidden;
  color: white;
  background: linear-gradient(to bottom, #ffd1dc, #ffe6b3, #cceeff);
  font-size: 1.1rem;
  transition: background 2s ease;
}
body.night {
  background: linear-gradient(to bottom, #1e3c72, #2a5298, #0f2027);
}
.toggle-btn {
  margin-top: 10px;
  padding: 8px 16px;
  border-radius: 10px;
  border: none;
  background: #fff;
  color: #333;
  cursor: pointer;
  font-family: 'Luckiest Guy', cursive;
}
.header-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 5px 10px;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 10;
  font-size: 1rem;
  background: rgba(0,0,0,0.3);
  flex-wrap: wrap;
}
.header-item {
  margin: 2px 0;
}
@media (max-width: 600px) {
  .header-bar {
    flex-direction: column;
    align-items: flex-start;
  }
}
#moon, #sun {
  position: absolute;
  top: 80px;
  right: 80px;
  width: 100px;
  height: 100px;
  border-radius: 50%;
  box-shadow: 0 0 30px 10px rgba(255,255,255,0.5);
  opacity: 0.7;
}
#moon {
  background: radial-gradient(circle, #fff 40%, #ccc 70%, transparent 100%);
  display: none;
}
#sun {
  background: radial-gradient(circle, #ffe066 40%, #ffcc00 70%, transparent 100%);
}
h1 {
  font-size: 2.5rem;
  margin-top: 60px;
}
#countdown {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 1rem;
  flex-wrap: wrap;
}
.time-block {
  background-color: rgba(255,228,181,0.8);
  padding: 20px;
  border-radius: 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  font-size: 2rem;
  width: 100px;
  color: #333;
}
.label { font-size: 1rem; margin-top: 5px; }
.gif {
  margin-top: 30px;
  border-radius: 12px;
  max-width: 100%;
}
audio { display: block; margin: 20px auto; }
.whale-buttons {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-bottom: 20px;
  flex-wrap: wrap;
}
.whale-button {
  font-size: 2rem;
  background: none;
  border: none;
  cursor: pointer;
}
.tiny {
  margin-top: 20px;
  font-size: 0.8rem;
  color: #fff;
}
canvas.game-canvas {
  border: 2px solid #ccc;
  background: #e6f7ff;
  display: block;
  margin: 50px auto;
  border-radius: 16px;
}
input, button {
  font-family: 'Luckiest Guy', cursive;
  padding: 5px 10px;
  border-radius: 8px;
  border: none;
  margin-top: 10px;
}
.arrow-buttons {
  margin-top: 10px;
}
.arrow-buttons button {
  font-size: 2rem;
  margin: 0 20px;
  background: #fff;
  color: #333;
  border-radius: 10px;
  cursor: pointer;
  touch-action: manipulation;
}
.head {
  position: absolute;
  top: 50%;
  right: -100px;
  z-index: 3;
  display: none;
  pointer-events: none;
}
#daily-fact {
  margin: 30px auto;
  font-size: 1.2rem;
  max-width: 90%;
}
</style>
</head>
<body class="day">
<div class="header-bar">
  <div class="header-item" id="single-clock">Loading time...</div>
  <div class="header-item" id="temp">Loading temperature...</div>
</div>
<div id="sun"></div>
<div id="moon"></div>
<div id="head1" class="head">
  <img src="https://dl.dropboxusercontent.com/scl/fi/at6j5aa64x3t1zw8hgnja/IMG_2568-removebg-preview.png" style="width:60px;">
</div>
<div id="head2" class="head">
  <img src="https://dl.dropboxusercontent.com/scl/fi/7wf3kkx881fi67nfjzll4/IMG_3133-removebg-preview.png" style="width:60px;">
</div>

<h1 title="hi tori üëÄ">You, Me, and This Countdown ‚Äî A Love Triangle</h1>
<button class="toggle-btn" onclick="toggleMode()">Toggle Day/Night</button>

<div id="countdown">
  <div class="time-block"><div id="days">0</div><div class="label">Days</div></div>
  <div class="time-block"><div id="hours">0</div><div class="label">Hours</div></div>
  <div class="time-block"><div id="minutes">0</div><div class="label">Minutes</div></div>
  <div class="time-block"><div id="seconds">0</div><div class="label">Seconds</div></div>
</div>

<video class="gif" autoplay loop muted playsinline>
  <source src="244188_small.mp4" type="video/mp4" />
</video>

<audio id="bg-music" controls autoplay loop>
  <source src="https://dl.dropboxusercontent.com/scl/fi/taqihndudrnlq5ruo1shn/Next-to-You.mp3?rlkey=ol6qzq4q2wrpirlkrjswro9d2&dl=0" type="audio/mpeg">
</audio>

<div class="whale-buttons">
  <button onclick="pauseMusic()" class="whale-button">üêã</button>
  <button onclick="playMusic()" class="whale-button">üê≥</button>
</div>

<div>
  <label for="secret-code">Enter the name of the place we went on our first date:</label><br>
  <input type="text" id="secret-code" placeholder="hint: jk, no hints" oninput="checkCode()" />
  <img id="hidden-photo" src="IMG_2797.jpeg" alt="Hidden Memory" style="display:none; max-width: 80%; margin-top: 20px; border-radius: 12px;">
</div>

<div style="margin-top: 20px;">
  <audio controls>
    <source src="https://dl.dropboxusercontent.com/scl/fi/47oiteyruexurqtdprj3n/New-Recording-14.mp3?rlkey=ki0tbhksz8o9qb0qoqqejtwgd&dl=0" type="audio/mpeg">
  </audio>
</div>

<div class="tiny">Not tired of my voice yet? Click above.</div>

<canvas id="gameCanvas" class="game-canvas" width="400" height="500"></canvas>
<div class="arrow-buttons">
  <button onclick="moveLeft()">‚¨ÖÔ∏è</button>
  <button onclick="moveRight()">‚û°Ô∏è</button>
</div>
<div style="font-size: 1.5rem; margin-top:20px;">Score: <span id="scoreDisplay">0</span></div>
<div style="font-size: 1rem; color: #ddd;">Top score: whatever you just got</div>

<div id="daily-fact">üêã Whale Fact: Loading...</div>

<script>
// Countdown
const countDownDate = new Date("August 28, 2025 17:00:00 GMT-0700").getTime();
setInterval(() => {
  const now = new Date().getTime();
  const distance = countDownDate - now;
  document.getElementById("days").innerText = Math.floor(distance / (1000 * 60 * 60 * 24));
  document.getElementById("hours").innerText = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  document.getElementById("minutes").innerText = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  document.getElementById("seconds").innerText = Math.floor((distance % (1000 * 60)) / 1000);
}, 1000);

function pauseMusic() {
  document.getElementById('bg-music').pause();
}
function playMusic() {
  document.getElementById('bg-music').play();
}
function toggleMode() {
  const body = document.body;
  const isNight = body.classList.toggle("night");
  document.getElementById("moon").style.display = isNight ? "block" : "none";
  document.getElementById("sun").style.display = isNight ? "none" : "block";
  updateSingleClock();
  updateTemperature();
}

// Secret Code
function checkCode() {
  const input = document.getElementById('secret-code').value.trim().toLowerCase();
  const photo = document.getElementById('hidden-photo');
  photo.style.display = (input === 'scopa') ? 'block' : 'none';
}

// Whale Fact
const facts = [
  "Blue whales are the largest animals ever known, reaching up to 100 feet long.",
  "A humpback whale‚Äôs song can last up to 30 minutes and travel hundreds of miles underwater.",
  "Some whales can hold their breath for over an hour when diving.",
  "Narwhals are real whales with a single spiral tusk.",
  "Gray whales migrate about 12,000 miles round-trip."
];
const today = new Date();
const index = today.getDate() % facts.length;
document.getElementById("daily-fact").innerText = "üêã Whale Fact: " + facts[index];

// Game
let score = 0, whaleX = 160, whaleY = 450, hearts = [];
const canvas = document.getElementById("gameCanvas"), ctx = canvas.getContext("2d");
function drawWhale() {
  ctx.fillStyle = "#0077cc";
  ctx.fillRect(whaleX, whaleY, 80, 30);
}
function drawHeart(x, y) {
  ctx.fillStyle = "red";
  ctx.beginPath();
  ctx.moveTo(x, y);
  ctx.bezierCurveTo(x, y - 10, x - 10, y - 15, x - 15, y);
  ctx.bezierCurveTo(x - 20, y + 15, x, y + 25, x, y + 35);
  ctx.bezierCurveTo(x, y + 25, x + 20, y + 15, x + 15, y);
  ctx.bezierCurveTo(x + 10, y - 15, x, y - 10, x, y);
  ctx.fill();
}
function updateGame() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawWhale();
  for (let i = 0; i < hearts.length; i++) {
    hearts[i].y += 2;
    drawHeart(hearts[i].x, hearts[i].y);
    if (hearts[i].y > whaleY && hearts[i].x > whaleX && hearts[i].x < whaleX + 80) {
      hearts.splice(i, 1);
      score++;
      document.getElementById('scoreDisplay').innerText = score;
      i--;
    }
  }
  if (Math.random() < 0.03) hearts.push({ x: Math.random() * 380 + 10, y: -20 });
  requestAnimationFrame(updateGame);
}
function moveLeft() {
  whaleX -= 20;
  whaleX = Math.max(0, whaleX);
}
function moveRight() {
  whaleX += 20;
  whaleX = Math.min(320, whaleX);
}
document.addEventListener("keydown", e => {
  if (e.key === "ArrowLeft") moveLeft();
  if (e.key === "ArrowRight") moveRight();
});
updateGame();

// Floating Heads
const head1 = document.getElementById('head1');
const head2 = document.getElementById('head2');
function spawnHead(head) {
  if (document.body.classList.contains('night')) {
    head.style.display = 'block';
    let x = window.innerWidth + 100;
    let y = window.innerHeight / 2 + (Math.random() * 50 - 25);
    const move = setInterval(() => {
      x -= 2.5;
      y -= 0.2;
      head.style.left = `${x}px`;
      head.style.top = `${y}px`;
      if (x < -100) {
        clearInterval(move);
        head.style.display = 'none';
      }
    }, 30);
  }
}
setInterval(() => spawnHead(head1), 120000);
setInterval(() => spawnHead(head2), 160000);

// Clock
function updateSingleClock() {
  const isNight = document.body.classList.contains("night");
  const tz = isNight ? "America/New_York" : "America/Los_Angeles";
  const label = isNight ? "Your Time" : "Tyler's Time";
  const time = new Date().toLocaleTimeString('en-US', {
    timeZone: tz,
    hour: '2-digit',
    minute: '2-digit'
  });
  document.getElementById("single-clock").textContent = `${label}: ${time}`;
}
setInterval(updateSingleClock, 1000);
updateSingleClock();

// Temperature
async function updateTemperature() {
  const apiKey = "113bf4b240cd4c9a81e42115252906";
  const tempDiv = document.getElementById("temp");
  try {
    const isNight = document.body.classList.contains("night");
    const coords = isNight ? "40.7033,-74.0110" : "34.0122,-118.4279";
    const label = isNight ? "Your temperature" : "Tyler's temperature";
    const response = await fetch(`https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${coords}`);
    const data = await response.json();
    const tempF = data.current.temp_f;
    tempDiv.textContent = `${label}: ${tempF}¬∞F`;
  } catch {
    tempDiv.textContent = "Temperature unavailable.";
  }
}
updateTemperature();
setInterval(updateTemperature, 900000);
</script>
</body>
</html>
