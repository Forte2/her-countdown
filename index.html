<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<title>hey pretty mama</title>
<link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet"/>

<style>
/* ---------- base ---------- */
html,body{
  margin:0;padding:0;
  font-family:'Luckiest Guy',cursive;
  text-align:center;overflow-x:hidden;
  color:#fff;
  background:linear-gradient(to bottom,#ffd1dc,#ffe6b3,#cceeff);
  font-size:1.1rem;transition:background 2s;
}
body.night{background:linear-gradient(to bottom,#1e3c72,#2a5298,#0f2027);}
h1{font-size:2.5rem;margin:20px 0 0 0}

/* ---------- controls ---------- */
.toggle-btn{margin:10px;padding:8px 16px;border-radius:10px;border:none;
  background:#fff;color:#333;cursor:pointer;font-family:'Luckiest Guy',cursive}

/* ---------- info bar ---------- */
.info-container{display:flex;justify-content:space-between;align-items:center;gap:10px;margin:10px 12px;flex-wrap:wrap}
.info-box{background:rgba(0,0,0,.3);padding:6px 12px;border-radius:8px;font-size:1rem;transition:background 1s}

/* ---------- sun / moon ---------- */
#sun,#moon{display:inline-block;width:80px;height:80px;border-radius:50%;box-shadow:0 0 30px 10px rgba(255,255,255,.5);opacity:.7;margin:0 auto 10px}
#sun{background:radial-gradient(circle,#ffecb3 40%,#ffd54f 70%,transparent 100%)}
#moon{background:radial-gradient(circle,#fff 40%,#ccc 70%,transparent 100%)}

/* ---------- clouds ---------- */
@keyframes floatClouds{0%{transform:translateX(0)}100%{transform:translateX(150vw)}}
.cloud{position:absolute;background:#fff;border-radius:50%;box-shadow:-60px 20px #fff,-30px 10px #fff,0 0 #fff,30px 10px #fff,60px 20px #fff;
  opacity:.8;animation:floatClouds 60s linear infinite;transform:translateX(-200px)}
.cloud1{width:200px;height:60px;top:50px;left:-250px}
.cloud2{width:180px;height:70px;top:100px;left:-300px;animation-delay:10s}
.cloud3{width:220px;height:80px;top:180px;left:-350px;animation-delay:20s}

/* ---------- stars canvas ---------- */
canvas#stars-canvas{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0}

/* ---------- floating heads / UFO ---------- */
.head,#ufo{position:absolute;top:50%;right:-100px;font-size:2rem;z-index:3;display:none;pointer-events:none}
.head img{width:60px}
#ufo{top:120px;left:-50px}

/* ---------- countdown ---------- */
#countdown{display:flex;justify-content:center;gap:20px;margin-top:1rem;flex-wrap:wrap}
.time-block{background:rgba(255,228,181,.8);padding:20px;border-radius:20px;box-shadow:0 4px 10px rgba(0,0,0,.1);font-size:2rem;width:100px;color:#333}
.time-block .label{font-size:1rem;margin-top:5px}

/* ---------- media ---------- */
.gif{margin-top:30px;border-radius:12px;max-width:100%}
audio{display:block;margin:20px auto;border-radius:8px}

/* ---------- game ---------- */
canvas.game-canvas{border:2px solid #ccc;background:#e6f7ff;display:block;margin:50px auto;border-radius:16px}
.arrow-buttons{margin-top:10px}
.arrow-buttons button{font-size:2rem;margin:0 20px;background:#fff;color:#333;border-radius:10px;cursor:pointer;touch-action:manipulation}

/* ---------- misc ---------- */
.whale-buttons{display:flex;justify-content:center;gap:20px;margin-bottom:20px;flex-wrap:wrap}
.whale-button{font-size:2rem;background:none;border:none;cursor:pointer}
.tiny{margin-top:20px;font-size:.8rem;color:#fff}
#daily-fact{margin:30px auto;font-size:1.2rem;max-width:90%}

/* ---------- mobile ---------- */
@media(max-width:600px){
  .info-container{flex-direction:column;align-items:center}
  h1{font-size:2rem;margin-top:20px}
}
</style>
</head>

<body class="day">

<!--  stars + clouds + heads + UFO  -->
<canvas id="stars-canvas"></canvas>
<div class="cloud cloud1"></div><div class="cloud cloud2"></div><div class="cloud cloud3"></div>

<div id="head1" class="head"><img src="https://dl.dropboxusercontent.com/s/at6j5aa64x3t1zw8hgnja/IMG_2568-removebg-preview.png"></div>
<div id="head2" class="head"><img src="https://dl.dropboxusercontent.com/s/7wf3kkx881fi67nfjzll4/IMG_3133-removebg-preview.png"></div>
<div id="ufo">üõ∏</div>

<!--  top info bar  -->
<div class="info-container">
  <div class="info-box" id="single-clock">Loading time‚Ä¶</div>
  <div class="info-box" id="airMood"  title="Loading AQI‚Ä¶">Loading air mood‚Ä¶</div>
  <div class="info-box" id="temp">Loading temperature‚Ä¶</div>
</div>

<!--  sun / moon  -->
<div id="sun"></div><div id="moon" style="display:none"></div>

<h1 title="hi tori üëÄ">You, Me, and This Countdown ‚Äî A Love Triangle</h1>
<button class="toggle-btn" onclick="toggleMode()">Toggle Day/Night</button>

<!--  countdown  -->
<div id="countdown">
  <div class="time-block"><div id="days">0</div><div class="label">Days</div></div>
  <div class="time-block"><div id="hours">0</div><div class="label">Hours</div></div>
  <div class="time-block"><div id="minutes">0</div><div class="label">Minutes</div></div>
  <div class="time-block"><div id="seconds">0</div><div class="label">Seconds</div></div>
</div>

<!--  gif + bg music  -->
<video class="gif" autoplay loop muted playsinline>
  <source src="244188_small.mp4" type="video/mp4">
</video>

<audio id="bg-music" controls autoplay loop>
  <source src="https://dl.dropboxusercontent.com/s/taqihndudrnlq5ruo1shn/Next-to-You.mp3" type="audio/mpeg">
</audio>

<div class="whale-buttons">
  <button class="whale-button" onclick="pauseMusic()">üêã</button>
  <button class="whale-button" onclick="playMusic()">üê≥</button>
</div>

<!--  secret photo  -->
<label for="secret">Enter the name of the place we went on our first date:</label><br>
<input id="secret" type="text" placeholder="hint: jk, no hints" oninput="checkCode()">
<br><img id="hidden-photo" src="IMG_2797.jpeg" style="display:none;max-width:80%;margin-top:20px;border-radius:12px">

<!--  voice note  -->
<audio controls style="margin-top:20px">
  <source src="https://dl.dropboxusercontent.com/s/47oiteyruexurqtdprj3n/New-Recording-14.mp3" type="audio/mpeg">
</audio>

<!--  mini-game  -->
<canvas id="gameCanvas" class="game-canvas" width="400" height="500"></canvas>
<div class="arrow-buttons">
  <button onclick="moveLeft()">‚¨ÖÔ∏è</button><button onclick="moveRight()">‚û°Ô∏è</button>
</div>
<div style="font-size:1.5rem;margin-top:20px">Score: <span id="scoreDisplay">0</span></div>
<div style="font-size:1rem;color:#ddd">Top score: whatever you just got</div>

<!--  whale fact & sound  -->
<div id="daily-fact">üêã Whale Fact: Loading‚Ä¶</div>
<audio id="whale-sound"><source src="https://dl.dropboxusercontent.com/s/gqm7x0nqkv73l89wgil01/Singing-whales.mp3" type="audio/mpeg"></audio>
<div class="tiny" style="cursor:pointer" onclick="playWhaleSound()">üîä Hear what the whale has to say about Israel</div>

<!-- ===================================================== -->
<script>
/* --- helpers --- */
const $ = id => document.getElementById(id);

/* --- countdown --- */
const dDay = new Date("2025-08-28T17:00:00-07:00").getTime();
setInterval(()=>{
  const t=dDay-Date.now();
  $("days").textContent   =Math.floor(t/864e5);
  $("hours").textContent  =Math.floor(t%864e5/36e5);
  $("minutes").textContent=Math.floor(t%36e5/6e4);
  $("seconds").textContent=Math.floor(t%6e4/1e3);
},1000);

/* --- music --- */
const bg = $("bg-music");
function pauseMusic(){bg.pause()}
function playMusic(){bg.play()}

/* --- whale sound --- */
function playWhaleSound(){const w=$("whale-sound");w.currentTime=0;w.play()}

/* --- dark / light mode --- */
function toggleMode(){
  document.body.classList.toggle("night");
  $("moon").style.display = document.body.classList.contains("night")?"inline-block":"none";
  $("sun").style.display  = document.body.classList.contains("night")?"none":"inline-block";
  updateClock();updateTemp();updateAQI();
}

/* --- secret photo --- */
function checkCode(){
  $("hidden-photo").style.display = $("secret").value.trim().toLowerCase()==="scopa"?"block":"none";
}

/* --- whale fact --- */
const facts=[
  "Blue whales have hearts the size of a small car.",
  "Sperm whales sleep vertically in the water.",
  "Beluga whales can mimic human voices.",
  "Gray whales sometimes spy-hop to look around.",
  "Narwhal tusks are flexible, not rigid.",
  "Bowhead whales can live over 200 years.",
  "Orcas are the largest dolphins.",
  "A blue whale‚Äôs tongue weighs as much as an elephant.",
  "Minke whales often approach boats out of curiosity.",
  "Beaked whales can dive nearly 10 000 ft."
];
$("daily-fact").textContent="üêã Whale Fact: "+facts[new Date().getDate()%facts.length];

/* --- mini-game --- */
let score=0, wx=160, wy=450, hearts=[];
const gc=$("gameCanvas"), gctx=gc.getContext("2d");
function drawWhale(){gctx.fillStyle="#0077cc";gctx.fillRect(wx,wy,80,30)}
function drawHeart(x,y){
  gctx.fillStyle="red";
  gctx.beginPath();
  gctx.moveTo(x,y);
  gctx.bezierCurveTo(x,y-10,x-10,y-15,x-15,y);
  gctx.bezierCurveTo(x-20,y+15,x,y+25,x,y+35);
  gctx.bezierCurveTo(x,y+25,x+20,y+15,x+15,y);
  gctx.bezierCurveTo(x+10,y-15,x,y-10,x,y);
  gctx.fill();
}
function updateGame(){
  gctx.clearRect(0,0,gc.width,gc.height);
  drawWhale();
  for(let i=0;i<hearts.length;i++){
    hearts[i].y+=2;drawHeart(hearts[i].x,hearts[i].y);
    if(hearts[i].y>wy && hearts[i].x>wx && hearts[i].x<wx+80){
      hearts.splice(i,1);score++;$("scoreDisplay").textContent=score;i--;
    }
  }
  if(Math.random()<.03)hearts.push({x:Math.random()*380+10,y:-20});
  requestAnimationFrame(updateGame);
}
function moveLeft(){wx=Math.max(0,wx-20)}
function moveRight(){wx=Math.min(320,wx+20)}
document.addEventListener("keydown",e=>{if(e.key==="ArrowLeft")moveLeft();if(e.key==="ArrowRight")moveRight()});
updateGame();

/* --- stars canvas --- */
const sc=$("stars-canvas"),sctx=sc.getContext("2d");let stars=[],shoot=null;
function sizeStars(){sc.width=innerWidth;sc.height=innerHeight}
onresize=sizeStars;sizeStars();
for(let i=0;i<150;i++)stars.push({x:Math.random()*sc.width,y:Math.random()*sc.height,r:Math.random()*1.5,a:Math.random(),d:Math.random()*0.02});
function mkShoot(){shoot={x:Math.random()*sc.width,y:0,r:2,v:10}}
setInterval(()=>{if(document.body.classList.contains("night")&&!shoot&&Math.random()<.1)mkShoot()},1000);
function drawStars(){
  sctx.clearRect(0,0,sc.width,sc.height);
  if(document.body.classList.contains("night")){
    stars.forEach(s=>{s.a+=s.d;if(s.a<=0||s.a>=1)s.d=-s.d;
      sctx.fillStyle=`rgba(255,255,255,${s.a})`;sctx.beginPath();sctx.arc(s.x,s.y,s.r,0,2*Math.PI);sctx.fill();});
    if(shoot){sctx.fillStyle="#fff";sctx.beginPath();sctx.arc(shoot.x,shoot.y,shoot.r,0,2*Math.PI);sctx.fill();
      shoot.x+=shoot.v;shoot.y+=shoot.v;if(shoot.y>sc.height)shoot=null;}
  }
  requestAnimationFrame(drawStars);
}
drawStars();

/* --- floating heads --- */
function spawnHead(el){
  if(!document.body.classList.contains("night"))return;
  el.style.display="block";let x=innerWidth+100,y=innerHeight/2+(Math.random()*50-25);
  const id=setInterval(()=>{
    x-=2.5;y-=0.2;el.style.left=x+"px";el.style.top=y+"px";
    if(x<-100){clearInterval(id);el.style.display="none";}
  },30);
}
setInterval(()=>spawnHead($("head1")),5000); // 5 s test
setInterval(()=>spawnHead($("head2")),7000); // 7 s test

/* --- UFO --- */
function spawnUFO(){
  if(!document.body.classList.contains("night"))return;
  const u=$("ufo");u.style.display="block";let x=-50;
  const id=setInterval(()=>{
    x+=3;u.style.left=x+"px";
    if(x>innerWidth+50){clearInterval(id);u.style.display="none";}
  },30);
}
setInterval(spawnUFO,15000);

/* --- clock --- */
function updateClock(){
  const night=document.body.classList.contains("night");
  const tz=night?"America/New_York":"America/Los_Angeles";
  const label=night?"Your Time":"Tyler's Time";
  $("single-clock").textContent=`${label}: ${new Date().toLocaleTimeString("en-US",{timeZone:tz,hour:'2-digit',minute:'2-digit'})}`;
}
setInterval(updateClock,1000);updateClock();

/* --- temperature --- */
async function updateTemp(){
  const api="113bf4b240cd4c9a81e42115252906";
  const night=document.body.classList.contains("night");
  const coords=night?"40.7033,-74.0110":"34.0122,-118.4279";
  const label=night?"Your temperature":"Tyler's temperature";
  try{
    const r=await fetch(`https://api.weatherapi.com/v1/current.json?key=${api}&q=${coords}`);
    const d=await r.json();
    $("temp").textContent=`${label}: ${d.current.temp_f}¬∞F`;
  }catch{ $("temp").textContent="Temperature unavailable."; }
}
updateTemp();setInterval(updateTemp,9e5);

/* --- AQI --- */
const moods=[
  "‚ú® Air‚Äôs basically filtered, reverse osmosis vibes.",
  "ü´ß Kinda clean, ngl.",
  "üòó‚úåÔ∏è Meh. Kinda mid.",
  "ü´† Low-key crusty out here.",
  "üòÆ‚Äçüí® The air is literally buns af.",
  "‚ò†Ô∏è Babe don‚Äôt breathe this."
];
async function updateAQI(){
  const api="113bf4b240cd4c9a81e42115252906";
  const night=document.body.classList.contains("night");
  const coords=night?"40.7033,-74.0110":"34.0122,-118.4279";
  try{
    const r=await fetch(`https://api.weatherapi.com/v1/current.json?key=${api}&q=${coords}&aqi=yes`);
    const d=await r.json();const idx=d.current.air_quality["us-epa-index"];
    $("airMood").textContent="Air Mood: "+(moods[idx-1]||"ü§∑‚Äç‚ôÇÔ∏è Air status unknown.");
    $("airMood").title=`AQI index: ${idx}`;
    $("airMood").style.background=idx>=4?"rgba(255,0,0,.4)":"rgba(0,0,0,.3)";
    localStorage.setItem("lastAQI",idx);
  }catch{
    $("airMood").textContent="Air Mood: unavailable.";
  }
}
updateAQI();setInterval(updateAQI,9e5);

/* --- on load restore AQI colour --- */
const saved=+localStorage.getItem("lastAQI");
if(saved){$("airMood").style.background=saved>=4?"rgba(255,0,0,.4)":"rgba(0,0,0,.3)";}
</script>
</body>
</html>
