<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<title>hey pretty mama</title>
<link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet"/>
<style>
/* ----------  BASIC LAYOUT  ---------- */
html,body{
  margin:0;padding:0;
  font-family:'Luckiest Guy',cursive;
  text-align:center;
  overflow-x:hidden;
  color:#fff;
  background:linear-gradient(to bottom,#ffd1dc,#ffe6b3,#cceeff);
  font-size:1.1rem;
  transition:background 2s;
}
body.night{
  background:linear-gradient(to bottom,#1e3c72,#2a5298,#0f2027);
}
h1{font-size:2.5rem;margin:20px 0}
@media(max-width:600px){h1{font-size:2rem;margin:20px 0}}

/* ----------  INFO TOP ROW ---------- */
.info-container{
  display:flex;justify-content:space-between;align-items:center;
  flex-wrap:wrap;gap:10px;margin:10px;
}
.info-box{
  background:rgba(0,0,0,.3);
  padding:5px 10px;border-radius:8px;font-size:1rem;
  transition:background 1s;
}
@media(max-width:600px){.info-container{flex-direction:column}}

/* ----------  SUN / MOON (inline between rows) ---------- */
#moon,#sun{
  display:inline-block;margin:10px auto;
  width:80px;height:80px;border-radius:50%;
  box-shadow:0 0 30px 10px rgba(255,255,255,.5);opacity:.7;
}
#moon{background:radial-gradient(circle,#fff 40%,#ccc 70%,transparent 100%)}
#sun{background:radial-gradient(circle,#ffecb3 40%,#ffd54f 70%,transparent 100%)}

/* ----------  CLOUDS  ---------- */
@keyframes floatClouds{0%{transform:translateX(0)}100%{transform:translateX(150vw)}}
.cloud{
  position:absolute;opacity:.8;
  background:#fff;border-radius:50%;
  box-shadow:-60px 20px #fff,-30px 10px #fff,0 0 #fff,30px 10px #fff,60px 20px #fff;
  animation:floatClouds 60s linear infinite;transform:translateX(-200px);
}
.cloud1{width:200px;height:60px;top:50px;left:-250px}
.cloud2{width:180px;height:70px;top:100px;left:-300px;animation-delay:10s}
.cloud3{width:220px;height:80px;top:180px;left:-350px;animation-delay:20s}

/* ----------  UFO & HEADS ---------- */
#ufo{position:absolute;top:120px;left:-50px;font-size:2rem;z-index:3;display:none}
.head{position:absolute;top:50%;right:-100px;z-index:3;display:none}

/* ----------  COUNTDOWN  ---------- */
#countdown{display:flex;justify-content:center;flex-wrap:wrap;gap:20px;margin-top:1rem}
.time-block{
  background:rgba(255,228,181,.8);
  padding:20px;border-radius:20px;box-shadow:0 4px 10px rgba(0,0,0,.1);
  font-size:2rem;width:100px;color:#333;
}
.label{font-size:1rem;margin-top:5px}

/* ----------  BUTTONS / AUDIO / GAME ---------- */
.toggle-btn,button,input{font-family:'Luckiest Guy',cursive}
.toggle-btn{margin-top:10px;padding:8px 16px;border-radius:10px;border:none;background:#fff;color:#333;cursor:pointer}
.whale-buttons{display:flex;justify-content:center;gap:20px;margin:20px 0;flex-wrap:wrap}
.whale-button{font-size:2rem;background:none;border:none;cursor:pointer}
.tiny{margin-top:20px;font-size:.8rem}
audio{display:block;margin:20px auto;border-radius:8px}
.game-canvas{border:2px solid #ccc;background:#e6f7ff;display:block;margin:50px auto;border-radius:16px}

/* ----------  STARS CANVAS (background) ---------- */
canvas#stars-canvas{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0}
</style>
</head>

<body class="day">
<!--  BACKGROUND DECOR  -->
<canvas id="stars-canvas"></canvas>
<div class="cloud cloud1"></div><div class="cloud cloud2"></div><div class="cloud cloud3"></div>
<div id="ufo">üõ∏</div>

<!--  FLOATING HEADS  -->
<div id="head1" class="head"><img src="https://dl.dropboxusercontent.com/scl/fi/at6j5aa64x3t1zw8hgnja/IMG_2568-removebg-preview.png?raw=1" style="width:60px"></div>
<div id="head2" class="head"><img src="https://dl.dropboxusercontent.com/scl/fi/7wf3kkx881fi67nfjzll4/IMG_3133-removebg-preview.png?raw=1" style="width:60px"></div>

<!--  TOP INFO ROW  -->
<div class="info-container">
  <div class="info-box" id="single-clock">Loading time‚Ä¶</div>
  <div class="info-box" id="airMood" title="Loading AQI‚Ä¶">Loading air mood‚Ä¶</div>
  <div class="info-box" id="temp">Loading temperature‚Ä¶</div>
</div>

<!--  SUN / MOON ICON  -->
<div id="moon"></div><div id="sun"></div>

<h1 title="hi tori üëÄ">You, Me, and This Countdown ‚Äî A Love Triangle</h1>
<button class="toggle-btn" onclick="toggleMode()">Toggle Day/Night</button>

<!--  COUNTDOWN  -->
<div id="countdown">
  <div class="time-block"><div id="days">0</div><div class="label">Days</div></div>
  <div class="time-block"><div id="hours">0</div><div class="label">Hours</div></div>
  <div class="time-block"><div id="minutes">0</div><div class="label">Minutes</div></div>
  <div class="time-block"><div id="seconds">0</div><div class="label">Seconds</div></div>
</div>

<!--  FUN GIF  -->
<video class="gif" autoplay loop muted playsinline>
  <source src="244188_small.mp4" type="video/mp4">
</video>

<!--  BACKGROUND MUSIC  -->
<audio id="bg-music" controls autoplay loop>
  <source src="https://dl.dropboxusercontent.com/scl/fi/taqihndudrnlq5ruo1shn/Next-to-You.mp3?raw=1" type="audio/mpeg">
</audio>
<div class="whale-buttons">
  <button onclick="bg_music.pause()" class="whale-button">üêã</button>
  <button onclick="bg_music.play()"  class="whale-button">üê≥</button>
</div>

<!--  SECRET PHOTO  -->
<label for="secret-code">Enter the name of the place we went on our first date:</label><br>
<input id="secret-code" placeholder="hint: jk, no hints" oninput="checkCode()">
<img id="hidden-photo" src="IMG_2797.jpeg" alt="Hidden Memory" style="display:none;max-width:80%;margin-top:20px;border-radius:12px">

<!--  VOICE NOTE  -->
<div style="margin-top:20px"><audio controls><source src="https://dl.dropboxusercontent.com/scl/fi/47oiteyruexurqtdprj3n/New-Recording-14.mp3?raw=1" type="audio/mpeg"></audio></div>

<!--  MINI GAME  -->
<canvas id="gameCanvas" class="game-canvas" width="400" height="500"></canvas>
<div class="arrow-buttons"><button onclick="moveLeft()">‚¨ÖÔ∏è</button><button onclick="moveRight()">‚û°Ô∏è</button></div>
<div style="font-size:1.5rem;margin-top:20px">Score: <span id="scoreDisplay">0</span></div>
<div style="font-size:1rem;color:#ddd">Top score: whatever you just got</div>

<!--  WHALE FACT & SOUND  -->
<div id="daily-fact">üêã Whale Fact: Loading‚Ä¶</div>
<audio id="whale-sound"><source src="https://dl.dropboxusercontent.com/scl/fi/gqm7x0nqkv73l89wgil01/Singing-whales.mp3?raw=1" type="audio/mpeg"></audio>
<div class="tiny" style="cursor:pointer" onclick="playWhaleSound()">üîä Hear what the whale has to say about Israel</div>

<script>
/* ============ COUNTDOWN ============ */
const target = new Date("2025-08-28T17:00:00-07:00").getTime();
setInterval(()=>{
  const d=target-Date.now();
  days.textContent = Math.floor(d/864e5);
  hours.textContent= Math.floor(d%864e5/36e5);
  minutes.textContent=Math.floor(d%36e5/6e4);
  seconds.textContent=Math.floor(d%6e4/1e3);
},1000);

/* ============ SECRET CODE ============ */
function checkCode(){hidden_photo.style.display = secret_code.value.trim().toLowerCase()==='scopa'?'block':'none'}

/* ============ WHALE FACT ============ */
const facts=["Blue whales have hearts the size of a small car.","Sperm whales sleep vertically in the water.","Beluga whales can mimic human voices.","Gray whales like to spy-hop.","Narwhal tusks are bendy, not hard.","Bowhead whales can live over 200 years.","Orcas are actually dolphins.","A blue whale‚Äôs tongue weighs as much as an elephant.","Minke whales approach boats out of curiosity.","Beaked whales dive almost 10 000 ft."];
daily_fact.textContent="üêã Whale Fact: "+facts[new Date().getDate()%facts.length];

/* ============ GAME ============ */
let score=0,whaleX=160,whaleY=450,hearts=[];
const ctx=gameCanvas.getContext("2d");
function drawWhale(){ctx.fillStyle="#0077cc";ctx.fillRect(whaleX,whaleY,80,30)}
function drawHeart(x,y){
  ctx.fillStyle="red";ctx.beginPath();
  ctx.moveTo(x,y);ctx.bezierCurveTo(x,y-10,x-10,y-15,x-15,y);
  ctx.bezierCurveTo(x-20,y+15,x,y+25,x,y+35);
  ctx.bezierCurveTo(x,y+25,x+20,y+15,x+15,y);
  ctx.bezierCurveTo(x+10,y-15,x,y-10,x,y);ctx.fill();
}
function updateGame(){
  ctx.clearRect(0,0,400,500);drawWhale();
  hearts.forEach((h,i)=>{h.y+=2;drawHeart(h.x,h.y);
    if(h.y>whaleY&&h.x>whaleX&&h.x<whaleX+80){hearts.splice(i,1);score++;scoreDisplay.textContent=score}});
  if(Math.random()<.03)hearts.push({x:Math.random()*380+10,y:-20});
  requestAnimationFrame(updateGame);
}
function moveLeft(){whaleX=Math.max(0,whaleX-20)}
function moveRight(){whaleX=Math.min(320,whaleX+20)}
document.addEventListener("keydown",e=>{if(e.key==="ArrowLeft")moveLeft();if(e.key==="ArrowRight")moveRight()});
updateGame();

/* ============ STARS ============ */
const starsCtx=stars_canvas.getContext("2d"),stars=[];
function resizeStars(){stars_canvas.width=innerWidth;stars_canvas.height=innerHeight}
addEventListener("resize",resizeStars);resizeStars();
for(let i=0;i<150;i++)stars.push({x:Math.random()*innerWidth,y:Math.random()*innerHeight,r:Math.random()*1.5,a:Math.random(),d:Math.random()*.02});
let shooting=null;
setInterval(()=>{if(body.classList.contains("night")&&!shooting&&Math.random()<.1)shooting={x:Math.random()*innerWidth,y:0,r:2,s:10}},1000);
function starLoop(){
  starsCtx.clearRect(0,0,stars_canvas.width,stars_canvas.height);
  if(body.classList.contains("night")){
    stars.forEach(s=>{s.a+=s.d;(s.a<=0||s.a>=1)&&(s.d=-s.d);
      starsCtx.beginPath();starsCtx.arc(s.x,s.y,s.r,0,6.283);
      starsCtx.fillStyle=`rgba(255,255,255,${s.a})`;starsCtx.fill()});
    if(shooting){starsCtx.beginPath();starsCtx.arc(shooting.x,shooting.y,shooting.r,0,6.283);starsCtx.fill();
      shooting.x+=shooting.s;shooting.y+=shooting.s;if(shooting.y>innerHeight)shooting=null;}
  }
  requestAnimationFrame(starLoop);
}
starLoop();

/* ============ SUN / MOON & TOGGLE ============ */
function toggleMode(){
  body.classList.toggle("night");
  moon.style.display = body.classList.contains("night")?"block":"none";
  sun .style.display = body.classList.contains("night")?"none":"block";
  updateSingleClock();updateTemperature();updateAirMood();
}

/* ============ CLOCK ============ */
function updateSingleClock(){
  const night = body.classList.contains("night");
  const tz    = night?"America/New_York":"America/Los_Angeles";
  const label = night?"Your Time":"Tyler's Time";
  single_clock.textContent=`${label}: `+new Date().toLocaleTimeString("en-US",{timeZone:tz,hour:'2-digit',minute:'2-digit'});
}
setInterval(updateSingleClock,1000);updateSingleClock();

/* ============ WEATHER & AIR  ============ */
const weatherKey="113bf4b240cd4c9a81e42115252906";
async function updateTemperature(){
  try{
    const night=body.classList.contains("night");
    const coords=night?"40.7033,-74.0110":"34.0122,-118.4279";
    const label =night?"Your temperature":"Tyler's temperature";
    const j=await (await fetch(`https://api.weatherapi.com/v1/current.json?key=${weatherKey}&q=${coords}`)).json();
    temp.textContent=`${label}: ${j.current.temp_f}¬∞F`;
  }catch{temp.textContent="Temperature unavailable."}
}
updateTemperature();setInterval(updateTemperature,9e5);

const moods=["‚ú® Air‚Äôs basically filtered, reverse osmosis vibes.","ü´ß Kinda clean, ngl.","üòó‚úåÔ∏è Meh. Kinda mid.","ü´† Low-key crusty out here.","üòÆ‚Äçüí® The air is literally buns af.","‚ò†Ô∏è Babe don‚Äôt breathe this."];
function moodColor(i){return i>=5?"rgba(255,0,0,.45)":i===4?"rgba(255,165,0,.4)":"rgba(0,0,0,.3)"}
async function updateAirMood(){
  try{
    const night=body.classList.contains("night");
    const coords=night?"40.7033,-74.0110":"34.0122,-118.4279";
    const j=await (await fetch(`https://api.weatherapi.com/v1/current.json?key=${weatherKey}&q=${coords}&aqi=yes`)).json();
    const idx=j.current.air_quality["us-epa-index"];
    localStorage.setItem("AQI",idx);
    airMood.textContent=`Air Mood: ${moods[idx-1]||"ü§∑‚Äç‚ôÇÔ∏è Unknown"}`;
    airMood.title=`AQI index: ${idx}`;
    airMood.style.background=moodColor(idx);
  }catch{
    const saved=localStorage.getItem("AQI");
    if(saved){airMood.textContent=`Air Mood: ${moods[saved-1]||"ü§∑‚Äç‚ôÇÔ∏è Unknown"}`;airMood.title=`AQI index: ${saved}`;airMood.style.background=moodColor(saved)}
    else airMood.textContent="Air Mood: unavailable.";
  }
}
updateAirMood();setInterval(updateAirMood,9e5);

/* ============ WHALE SOUND CLICK ============ */
function playWhaleSound(){whale_sound.currentTime=0;whale_sound.play()}

/* ============ FLOATING HEADS ============ */
function spawnHead(h){
  if(!body.classList.contains("night"))return;
  h.style.display="block";
  let x=innerWidth+100,y=innerHeight/2+(Math.random()*50-25);
  const id=setInterval(()=>{
    x-=2.5;y-=.2;h.style.left=x+"px";h.style.top=y+"px";
    if(x<-100){clearInterval(id);h.style.display="none";}
  },30);
}
setInterval(() => spawnHead(head1), 3000);   // 3 s
setInterval(() => spawnHead(head2), 5000);   // 5 s

/* ============ INITIAL DISPLAY FOR SUN / MOON ============ */
moon.style.display="none";           /* day by default */
</script>
</body>
</html>
