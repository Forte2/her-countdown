<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport"
      content="width=device-width,initial-scale=1.0,user-scalable=no"/>
<title>hey pretty mama</title>

<link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap"
      rel="stylesheet" />

<style>
/* ---------- GLOBAL ---------- */
html,body{margin:0;padding:0;font-family:'Luckiest Guy',cursive;text-align:center;
  overflow-x:hidden;color:#fff;font-size:1.1rem;
  background:linear-gradient(#ffd1dc,#ffe6b3,#cceeff);transition:background 2s}
body.night{background:linear-gradient(#1e3c72,#2a5298,#0f2027)}
.toggle-btn{margin-top:10px;padding:8px 16px;border:none;border-radius:10px;
  background:#fff;color:#333;cursor:pointer;font-family:'Luckiest Guy',cursive}
.info-container{display:flex;justify-content:space-between;align-items:center;
  flex-wrap:wrap;gap:10px;margin:10px}
.info-box{background:rgba(0,0,0,.3);padding:5px 10px;border-radius:8px;font-size:1rem;transition:background 1s}
#moon,#sun{position:relative;display:inline-block;margin:20px auto;width:80px;height:80px;border-radius:50%;
  box-shadow:0 0 30px 10px rgba(255,255,255,.5);opacity:.7}
#moon{background:radial-gradient(#fff 40%,#ccc 70%,transparent 100%)}
#sun {background:radial-gradient(#ffecb3 40%,#ffd54f 70%,transparent 100%)}

/* clouds */
@keyframes floatClouds{0%{transform:translateX(-200px)}100%{transform:translateX(calc(100vw+200px))}}
.cloud{position:absolute;background:#fff;border-radius:50%;opacity:.8;animation:floatClouds 60s linear infinite}
.cloud1{top:50px;width:200px;height:60px;animation-delay:0s}
.cloud2{top:100px;width:180px;height:70px;animation-delay:10s}
.cloud3{top:180px;width:220px;height:80px;animation-delay:20s}

/* UFO */
#ufo{position:absolute;top:120px;left:-60px;font-size:2.5rem;z-index:3;display:block;
  animation:floatClouds 45s linear infinite;pointer-events:none}

/* floating heads */
.head{position:absolute;top:50%;left:calc(100vw + 120px);z-index:3;display:none;pointer-events:none}

/* misc layout */
h1{font-size:2.5rem;margin:20px 0 10px}
#countdown{display:flex;justify-content:center;gap:20px;margin:1rem 0;flex-wrap:wrap}
.time-block{background:rgba(255,228,181,.8);padding:20px;border-radius:20px;
  box-shadow:0 4px 10px rgba(0,0,0,.1);font-size:2rem;width:100px;color:#333}
.label{font-size:.9rem;margin-top:5px}
audio{display:block;margin:20px auto;border-radius:8px}
.whale-buttons{display:flex;justify-content:center;gap:20px;margin-bottom:20px;flex-wrap:wrap}
.whale-button{font-size:2rem;background:none;border:none;cursor:pointer}
.tiny{margin-top:20px;font-size:.8rem;color:#fff}
canvas.game-canvas{border:2px solid #ccc;background:#e6f7ff;display:block;margin:50px auto;border-radius:16px}
.arrow-buttons{margin-top:10px}
.arrow-buttons button{font-size:2rem;margin:0 20px;background:#fff;color:#333;border-radius:10px;cursor:pointer}
#daily-fact{margin:30px auto;font-size:1.2rem;max-width:90%}

/* NASA APOD box */
#apod{margin:30px auto;max-width:90%;color:#fff}
#apod img{width:100%;max-height:400px;object-fit:cover;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,.4)}
#apod h3{margin:0 0 6px;font-size:1.3rem}
#apod .caption{margin-top:8px;font-size:.9rem;line-height:1.3}

/* small-screen tweaks */
@media(max-width:600px){
  .info-container{flex-direction:column}
  h1{font-size:2rem}
}
</style>
</head>

<body class="day">

<!-- background -->
<canvas id="stars-canvas"
        style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0"></canvas>
<div class="cloud cloud1"></div><div class="cloud cloud2"></div><div class="cloud cloud3"></div>
<div id="ufo">üõ∏</div>

<!-- floating heads -->
<div id="head1" class="head"><img src="https://dl.dropboxusercontent.com/scl/fi/5o04858h6fdqt23amgfwl/IMG_2568-removebg-preview.png?raw=1"
     width="60" height="60" style="object-fit:contain"></div>
<div id="head2" class="head"><img src="https://dl.dropboxusercontent.com/scl/fi/padr9l1hdyatevnojn5kd/IMG_3133-removebg-preview.png?raw=1"
     width="60" height="60" style="object-fit:contain"></div>

<!-- status row -->
<div class="info-container">
  <div class="info-box" id="single-clock">Loading time‚Ä¶</div>
  <div class="info-box" id="airMood"  title="Loading AQI‚Ä¶">Loading air mood‚Ä¶</div>
  <div class="info-box" id="temp">Loading temperature‚Ä¶</div>
</div>

<div id="moon"></div><div id="sun"></div>

<h1>You, Me, and This Countdown ‚Äî A Love Triangle</h1>
<button class="toggle-btn" onclick="toggleMode()">Toggle Day / Night</button>

<!-- countdown -->
<div id="countdown">
  <div class="time-block"><div id="days">0</div><div class="label">Days</div></div>
  <div class="time-block"><div id="hours">0</div><div class="label">Hours</div></div>
  <div class="time-block"><div id="minutes">0</div><div class="label">Minutes</div></div>
  <div class="time-block"><div id="seconds">0</div><div class="label">Seconds</div></div>
</div>

<video class="gif" autoplay loop muted playsinline>
  <source src="244188_small.mp4" type="video/mp4">
</video>

<!-- playlist -->
<audio id="bg-music" controls preload="metadata" loop>
  <source src="https://dl.dropboxusercontent.com/scl/fi/taqihndudrnlq5ruo1shn/Next-to-You.mp3?raw=1" type="audio/mpeg">
</audio>
<div class="whale-buttons">
  <button class="whale-button" onclick="pauseMusic()">üêã</button>
  <button class="whale-button" onclick="playMusic()">üê≥</button>
</div>

<!-- secret photo -->
<label for="secret-code">Enter the name of the place we went on our first date:</label><br>
<input id="secret-code" placeholder="hint: jk, no hints" oninput="checkCode()">
<img id="hidden-photo" src="IMG_2797.jpeg"
     style="display:none;max-width:80%;margin-top:20px;border-radius:12px">

<!-- voice note -->
<div style="margin-top:20px">
  <audio controls preload="metadata">
    <source src="https://dl.dropboxusercontent.com/scl/fi/47oiteyruexurqtdprj3n/New-Recording-14.mp3?raw=1" type="audio/mpeg">
  </audio>
</div>

<!-- mini-game -->
<canvas id="gameCanvas" class="game-canvas" width="400" height="500"></canvas>
<div class="arrow-buttons"><button onclick="moveLeft()">‚¨ÖÔ∏è</button><button onclick="moveRight()">‚û°Ô∏è</button></div>
<div style="font-size:1.5rem;margin-top:20px;">Score: <span id="scoreDisplay">0</span></div>
<div style="font-size:1rem;color:#ddd;">Top score: whatever you just got</div>

<!-- NASA APOD -->
<div id="apod"><h3>Loading today‚Äôs NASA photo‚Ä¶</h3></div>

<!-- whale fact -->
<div id="daily-fact">üêã Whale Fact: Loading‚Ä¶</div>

<!-- whale sound -->
<audio id="whale-sound" preload="metadata">
  <source src="https://dl.dropboxusercontent.com/scl/fi/gqm7x0nqkv73l89wgil01/Singing-whales.mp3?raw=1" type="audio/mpeg">
</audio>
<div class="tiny" style="cursor:pointer" onclick="playWhaleSound()">üîä Hear what the whale has to say about Israel</div>

<!-- ---------- MAIN JS ---------- -->
<script>
/* -------- handy handles -------- */
const days        = document.getElementById("days");
const hours       = document.getElementById("hours");
const minutes     = document.getElementById("minutes");
const seconds     = document.getElementById("seconds");

const singleClock = document.getElementById("single-clock");
const tempBox     = document.getElementById("temp");
const airMoodBox  = document.getElementById("airMood");

const bgMusic     = document.getElementById("bg-music");
const whaleSound  = document.getElementById("whale-sound");

const moon        = document.getElementById("moon");
const sun         = document.getElementById("sun");

const hiddenPhoto = document.getElementById("hidden-photo");
const secretCode  = document.getElementById("secret-code");

const head1       = document.getElementById("head1");
const head2       = document.getElementById("head2");

/* -------- countdown -------- */
const target = new Date("2025-08-28T17:00:00-07:00").getTime();
setInterval(()=>{
  const d = target - Date.now();
  days.textContent    = Math.floor(d / 864e5);
  hours.textContent   = Math.floor(d % 864e5 / 36e5);
  minutes.textContent = Math.floor(d % 36e5 / 6e4);
  seconds.textContent = Math.floor(d % 6e4 / 1e3);
},1000);

/* -------- music controls -------- */
function pauseMusic(){ bgMusic.pause(); }
function playMusic(){  bgMusic.play();  }

/* -------- whale sound -------- */
function playWhaleSound(){ whaleSound.currentTime = 0; whaleSound.play(); }

/* -------- day/night toggle -------- */
function toggleMode(){
  document.body.classList.toggle("night");
  moon.style.display = document.body.classList.contains("night") ? "block" : "none";
  sun.style.display  = document.body.classList.contains("night") ? "none"  : "block";
  updateClock(); updateTempAQI();
}

/* -------- secret photo -------- */
function checkCode(){
  hiddenPhoto.style.display =
    secretCode.value.trim().toLowerCase()==="scopa" ? "block" : "none";
}

/* -------- whale facts -------- */
const facts=[/* your 20-item list (unchanged) */];
dailyFact.textContent = "üêã Whale Fact: " +
  facts[new Date().getDate() % facts.length];

/* -------- mini-game (unchanged) -------- */
let score=0,wx=160,wy=450,hearts=[];
const cvs=document.getElementById("gameCanvas"),ctx=cvs.getContext("2d");
function drawWhale(){ctx.fillStyle="#0077cc";ctx.fillRect(wx,wy,80,30);}
function drawHeart(x,y){ctx.fillStyle="red";ctx.beginPath();
  ctx.moveTo(x,y);ctx.bezierCurveTo(x,y-10,x-10,y-15,x-15,y);
  ctx.bezierCurveTo(x-20,y+15,x,y+25,x,y+35);
  ctx.bezierCurveTo(x,y+25,x+20,y+15,x+15,y);
  ctx.bezierCurveTo(x+10,y-15,x,y-10,x,y);ctx.fill();}
function updateGame(){
  ctx.clearRect(0,0,cvs.width,cvs.height);drawWhale();
  hearts.forEach((h,i)=>{
    h.y+=2;drawHeart(h.x,h.y);
    if(h.y>wy&&h.x>wx&&h.x<wx+80){hearts.splice(i,1);score++;scoreDisplay.textContent=score;}
  });
  if(Math.random()<.03)hearts.push({x:Math.random()*360+20,y:-20});
  requestAnimationFrame(updateGame);
}
function moveLeft(){wx=Math.max(0,wx-20);}
function moveRight(){wx=Math.min(320,wx+20);}
document.addEventListener("keydown",e=>{if(e.key==="ArrowLeft")moveLeft();if(e.key==="ArrowRight")moveRight();});
updateGame();

/* -------- stars -------- */
const sc=document.getElementById("stars-canvas"),sctx=sc.getContext("2d");let stars=[];function resizeStars(){sc.width=innerWidth;sc.height=innerHeight;}
resizeStars();addEventListener("resize",resizeStars);
for(let i=0;i<150;i++)stars.push({x:Math.random()*sc.width,y:Math.random()*sc.height,r:Math.random()*1.5,a:Math.random(),d:Math.random()*.02});
let shooting=null;
setInterval(()=>{if(document.body.classList.contains("night")&&Math.random()<.08&&!shooting)shooting={x:Math.random()*sc.width,y:0,v:10};},1000);
function drawStars(){
  sctx.clearRect(0,0,sc.width,sc.height);
  if(!document.body.classList.contains("night"))return requestAnimationFrame(drawStars);
  stars.forEach(s=>{s.a+=s.d;if(s.a<0||s.a>1)s.d=-s.d;
    sctx.fillStyle=`rgba(255,255,255,${s.a})`;sctx.beginPath();sctx.arc(s.x,s.y,s.r,0,6.283);sctx.fill();});
  if(shooting){
    sctx.fillStyle="#fff";sctx.beginPath();sctx.arc(shooting.x,shooting.y,2,0,6.283);sctx.fill();
    shooting.x+=shooting.v;shooting.y+=shooting.v;if(shooting.y>sc.height)shooting=null;
  }
  requestAnimationFrame(drawStars);
}
drawStars();

/* -------- floating heads -------- */
function spawnHead(el){
  if(el.style.display==="block"||!document.body.classList.contains("night"))return;
  el.style.display="block";
  let x=innerWidth+120,y=innerHeight/2+(Math.random()*60-30);
  const mover=setInterval(()=>{
    x-=2.5;y-=.2;el.style.left=x+"px";el.style.top=y+"px";
    if(x<-120){clearInterval(mover);el.style.display="none";}
  },30);
}
setInterval(()=>spawnHead(head1),6000);
setInterval(()=>spawnHead(head2),9000);

/* -------- single clock & weather -------- */
function updateClock(){
  const night=document.body.classList.contains("night");
  const tz   = night ? "America/New_York" : "America/Los_Angeles";
  const lbl  = night ? "Your Time"        : "Tyler's Time";
  singleClock.textContent =
    `${lbl}: `+
    new Date().toLocaleTimeString("en-US",{timeZone:tz,hour:"2-digit",minute:"2-digit"});
}
setInterval(updateClock,1000);updateClock();

async function updateTempAQI(){
  const night=document.body.classList.contains("night");
  const coords=night?"40.7033,-74.0110":"34.0122,-118.4279";
  const key="113bf4b240cd4c9a81e42115252906";
  try{
    const r=await fetch(`https://api.weatherapi.com/v1/current.json?key=${key}&q=${coords}&aqi=yes`);
    const j=await r.json();
    tempBox.textContent=(night?"Your temp":"Tyler's temp")+": "+j.current.temp_f+"¬∞F";
    const idx=j.current.air_quality["us-epa-index"];
    const moods=["‚ú® reverse-osmosis vibes","ü´ß kinda clean","üòó‚úåÔ∏è kinda mid","ü´† low-key crusty","üòÆ‚Äçüí® literally buns","‚ò†Ô∏è don‚Äôt breathe this"];
    airMoodBox.textContent="Air Mood: "+(moods[idx-1]||"unknown");
    airMoodBox.title=`AQI: ${idx}`;
    airMoodBox.style.background=idx>=4?"rgba(255,0,0,.4)":"rgba(0,0,0,.3)";
  }catch(e){
    console.error(e);
    tempBox.textContent="Temp n/a";airMoodBox.textContent="Air Mood: n/a";
  }
}
updateTempAQI();setInterval(updateTempAQI,900_000);
</script>

<!-- ---------- NASA APOD loader ---------- -->
<script>
const APOD_KEY="91vGPnJ7lTr84dz4PBrLnpanFupQsDrDEYvmHQwy";
const apodBox=document.getElementById("apod");
async function showAPOD(){
  try{
    const res=await fetch(`https://api.nasa.gov/planetary/apod?api_key=${APOD_KEY}`);
    const data=await res.json();
    if(data.media_type==="image"){
      apodBox.innerHTML=`<img src="${data.url}" alt="${data.title}">
        <h3>${data.title}</h3><div class="caption">${data.explanation}</div>`;
    }else{
      apodBox.innerHTML=`<h3>NASA APOD is a video today ‚Äî <a href="${data.url}" target="_blank" rel="noopener">watch here</a>.</h3>`;
    }
  }catch(err){
    console.error("APOD fetch failed:",err);
    apodBox.innerHTML="<h3>Couldn‚Äôt load NASA photo ü§ñ</h3>";
  }
}
showAPOD();setInterval(showAPOD,86_400_000);
</script>

</body>
</html>
